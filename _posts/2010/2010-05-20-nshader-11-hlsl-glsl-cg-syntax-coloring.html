---
layout: post
title: NShader 1.1, hlsl, glsl, cg syntax coloring for Visual Studio 2008 & 2010
date: '2010-05-20T20:49:00.004+11:00'
tags:
- Tools
- hlsl
- Visual Studio
- nshader
modified_time: '2010-05-20T21:40:39.984+11:00'
comments: true
blogger_id: tag:blogger.com,1999:blog-1076643699683521890.post-4143732115352511670
blogger_orig_url: http://code4k.blogspot.com/2010/05/nshader-11-hlsl-glsl-cg-syntax-coloring.html
---

I have recently released <a href="http://nshader.codeplex.com/">NShader</a> 1.1 which adds support for Visual Studio 2010 as well as bugfixes for hlsl/glsl syntax highlighting.<br /><br />While this plugin is quite cool to add a basic syntax highlighting for shader languages, It lacks intellisense/completion/error markers to improve the editor experience. I didn't have time to add such a functionality in this release as... I don't really have too much time dedicated to this project... and well, I have so much to learn from effectively practicing a lot more shader languages that I'm fine with this basic syntax highlighting! ;) Is it a huge task to add intellisense? It depends, but concretely, I need to implement for each shading language a full grammar/lexer parser in order to provide a reliable intellisense. Of course, a very basic intellisense would be feasible without this, but I would rather not to use an annoying/unreliable intellisense popup.<br /><a name='more'></a><br />Although, I did some research about existing lexers for shading languages, surprisingly, this is not something you can find easily. For hlsl for example, afaik, there is no bnf grammar published by Microsoft, so If you want to do it yourself, you need to go through the whole HLSL reference documentation and compile yourself a bnf... and that's something I can't afford in my spare time. One could argue that there are some startup code available on the net (<a href="http://src.chromium.org/svn/trunk/src/o3d/compiler/technique/Technique.g3pl">O3D from google</a> has an antlr parser/lexer, or a relative simpler <a href="http://code.google.com/p/schladetsch/source/browse/trunk/Effects/Tools/EffectTranslator/Grammars/Shader.g">one from Christian Schladetsch</a>), agree with that, but well... It still ask a bit more time to patch them, add support for SM5.0, handle correctly preprocessor directives... and so on... After that, I need to integrate it through the language service API, not the worst part. Anyway, If someone is motivated to help me on this, we could come with something. We will follow also if <a href="http://forums.xna.com/forums/p/7908/318939.aspx">Intelishade is able to resurrect in an open source way</a>... a joint venture would be interesting. <br /><br />Also, what's my feedback about migrating VS2008 language service to VS2010? Well, It was pretty straightforward! I did follow the sdk instructions about "<a href="http://msdn.microsoft.com/en-us/library/dd885475%28VS.100%29.aspx">Migrating a Legacy Language Service</a>" but It was not fully working as expected. In fact, the only remaining problem was that the <a href="http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/b7ff2dfb-a391-46ee-9f52-862b9b4c9e77">WSIX VS2001 installer didn't register automatically the NShader Language Service</a>. I was forced to add manually the pkgdef file (containing registry update for the language service) to the vsix archive. While I was working on the migration to VS2010, I had a look at the new <a href="http://msdn.microsoft.com/en-us/library/dd885242.aspx">extensibility framework </a>and was surprised to see that the new framework is by far much easier to implement in VS2010. Although, I didn't take the time to migrate NShader to use this new framework, It seems to be pretty easy... also nice thing is that they did provide a compatibility layer for legacy Language Service, so I didn't bother with the new api. But If I had to write a new plugin for VS, I would definitely use the new API, although It would only work with VS2010+ versions...<br /><br />One small recurrent disappointment : Visual Studio is still restricting to provide plugins for Express editions. From a "commercial point of view", I understand this restriction, although for the thousands (million maybe?) of people using express edition, this is a huge lack of functionality.I'm sure that allowing community plugins into Express Editions would in fact improve a lot more Visual Studio adoption.<br /><br />My next post should be about the making of <a href="http://pouet.net/prod.php?which=54529">Ergon at BP2010</a>. I have a couple of things to share about it, but I'm quite lazy at that time to write this post... but It's on the way! ;)