<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="lunet 0.5.3.0">
    <title>Goodbye project.json | xoofx</title>
    <link rel="stylesheet" href="/css/site.css">
    <script src="/js/site-defer.js" defer></script>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@xoofx">
    <meta name="twitter:title" content="Goodbye project.json | xoofx">
    <meta name="twitter:description" content="xoofx website">
    <meta name="twitter:image" content="https://xoofx.github.io/images/twitter-banner.png">
    <meta name="twitter:image:alt" content="Goodbye project.json | xoofx">    
    <script src="https://www.googletagmanager.com/gtag/js?id=G-0DVR9ML8KY" async></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-0DVR9ML8KY');</script>
  </head>
  <body>

  <div class="container">
    <div class="row">
      <nav class="navbar navbar-expand-md">
        <div class="container-fluid">
            <a class="xoofx-logo navbar-brand" href="/"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div id="navbarSupportedContent" class="collapse navbar-collapse justify-content-between">
<ol id='nav-id-home-0' class='navbar-nav nav-level0  w-100'>
  <li class='nav-item '>
    <span class='nav-item-row'><a href='/' class='nav-link  '>Home</a></span>  </li>
  <li class='nav-item  active'>
    <span class='nav-item-row'><a href='/blog/' class='nav-link  '>Blog</a></span>  </li>
  <li class='nav-item '>
    <span class='nav-item-row'><a href='/projects/' class='nav-link  '>Projects</a></span>  </li>
  <li class='nav-item  ms-auto'>
    <span class='nav-item-row'><a href='/about/' class='nav-link  '>About</a></span>  </li>
</ol>
            </div>            
        </div>
      </nav>
    </div>
    <div class="row">

<div class="col-sm-9 js-toc-content">
  <p id="lunet-results"></p>
  <article class="page">
    <div class="title">
		  <h1 class="title"><a href="/blog/2016/05/11/goodbye-project-json/">Goodbye project.json</a></h1>
		
    </div>
    <div class="entry-content">
    <div class="blog-post-meta">
      <span class="bi bi-calendar"></span>
      <span class="date"><time datetime="2016-05-11" itemprop="datePublished">May 11, 2016</time></span>
      <i class="bi bi-tag"></i><a href="/blog/tag/msbuild/">msbuild</a>
  	  <span class="bi bi-edit"></span> <a href="https://github.com/xoofx/xoofx.github.io/edit/master/blog/2016/2016-05-11-goodbye-project-json.md">edit</a>
    </div>
<p>This is a follow-up about <a href="https://twitter.com/xoofx/status/730223811895779328"><code>project.json</code> being abandoned in favour of msbuild</a></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/P9HqMZviaMg?start=1713" frameborder="0" allowfullscreen></iframe>
<h1 id="why-project.json-speculations">Why project.json (speculations)?</h1>
<ul>
<li>Because at the time the ASP.NET team worked on this, MSBuild was not open-source nor cross platform</li>
<li>MSBuild is a XML file that is laborious to edit, too verbose and usually not friendly in the eyes of a developer (at least, a bit more laborious to edit/view than a JSON file)</li>
<li>MSBuild and NuGet were poorly integrated (NuGet was polluting project references, references were duplicated/stored in a separate package.config file...etc., you had to specify a <code>nuspec</code> file on the side to package something from a csproj)</li>
<li>NuGet dependencies were not transitive, so we had to list dependencies explicitly</li>
<li>MSBuild was not able to easily target multiple platforms (you can, but you have to duplicate sln/csproj in order to achieve it correctly, very laborious)</li>
<li>&quot;Dude, I don't want to maintain a list of files to build my app&quot; (a js dev talking)</li>
<li>JSON is widely used in node.js/web techs, so let's use a format that sounds familiar to web devs</li>
<li>JSON felt more &quot;data-oriented&quot; than the freaking/bizarre msbuild model (some declaratives, some processes with an awful XML declarative language...etc.)</li>
</ul>
<h1 id="what-went-wrong-with-project.json">What went wrong with project.json?</h1>
<p>The problem is that <code>project.json</code> quickly had to replicate many <code>msbuild</code> project behaviours <a href="https://github.com/aspnet/Home/wiki/Project.json-file" title="https://github.com/aspnet/Home/wiki/Project.json-file">https://github.com/aspnet/Home/wiki/Project.json-file</a> (things like configurations, build targets, compilation flags, build commands...etc.) and well, you don't want to rebuild a build system, so at some point, everything had to go back to a well established build system (hint: <code>msbuild</code>) in order to build things efficiently (track file dependencies, don't compile things that are not necessary, add build conditions... etc.)</p>
<p>Things became worse and a bit more weird with <code>xproj</code> that acted as a bridge between the <code>msbuild</code> system and pseudo-build-system <code>project.json</code>, still <code>project.json</code> (and the underlying dnx ASP.NET vnext build system) was nowhere a build-system</p>
<h1 id="so-back-to-msbuild">So back to msbuild?</h1>
<p>While not ideal, it is easier to adapt msbuild to cover the missing bits, mainly:</p>
<ul>
<li>integrate the <code>project.json</code> dependencies part directly into a csproj is easy to do</li>
<li>automate cross-platform compilation</li>
<li>automate NuGet package creation</li>
</ul>
<p>Incidentally, I wrote an article almost 2 years ago that talked a little bit about this in &quot;<a href="http://xoofx.github.io/blog/2014/08/13/packages-vnext-power-up-our-net-builds/">Packages vNext: Power-up our .NET Builds</a>&quot;.</p>
<p>So I could not be more happy to see <code>project.json</code> being phased out. Back to a unified model will be way more sane and simpler to manage!</p>

    </div>
  </article>
</div>
<div class="col-sm-3">
  <nav class="js-toc toc sticky-top"></nav>
</div>
    </div>
  </div>
	<footer class="blog-footer">
        <p>Copyright &copy; 2009 - 2024, Alexandre Mutel - Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a> | Site powered by <a href="https://github.com/lunet-io/lunet">lunet</a></p>
	</footer>  </body>
</html>